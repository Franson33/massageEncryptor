"use strict";window.addEventListener("DOMContentLoaded",(function(e){const t=["А","Б","В","Г","Д","Е","Ё","Ж","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ъ","Ы","Ь","Э","Ю","Я","а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я",".",","," ","!","?"],l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","!","@","#","$","%","&","*","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","?","~","^","_","-","+","=",".",","," ","/","|"],n=[[16,3,2,13,5,10,11,8,9,6,7,12,4,15,14,1],[1,8,13,12,14,11,2,7,4,5,16,9,15,10,3,6],[1,8,11,14,12,13,2,7,6,3,16,9,15,10,5,4],[1,12,7,14,8,13,2,11,10,3,16,5,15,6,9,4],[7,12,1,14,2,13,8,11,16,3,10,5,9,6,15,4]];let r=t.length,o=n[0].length,u=function(e,t){let l=e.length,n=0,r=[];for(let e=0;e<l;e++){e>o-1&&0==e%o&&(n+=o);let u=t[e%o]+n-1;e>=l-l%o&&(u=e),r.push(u)}return r},c=document.querySelector(".JS-container"),i=c.querySelector(".JS-input"),a=c.querySelector(".JS-output"),d=c.querySelector(".JS-encrypt-button"),f=c.querySelector(".JS-excrypt-button");d.addEventListener("click",(function(e){e.preventDefault();let o=function(e){let o=Array.from(e),c=o.length,i=[],a="",d=e.length%5-1;d<0&&(d+=n.length);let f=n[d];console.log(d);let s=c%13,p=u(e,f);for(let e=0;e<c;e++){let t=o[p[e]];i.push(t)}for(let e=0;e<c;e++){let n=i[e];for(let e=0;e<r;e++){let o=e+s;o>=r&&(o-=r),n===t[e]&&(a+=l[o])}}return d=l[10*d],s=l[2*s],a+=String(d)+String(s),a}(i.value);!function(e){let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(o),alert("\r\n\r\nВаше сообщение зашифровано и скопирован в буфер обмена.\r\n\r\nТекст зашифровного сообщения: "+o),i.value=""})),f.addEventListener("click",(function(e){e.preventDefault();let o=a.value;alert(function(e){let o,c,i=[],a="",d=e.length,f=d-1,s=f-1;for(let t=0;t<r;t++)e[f]===l[t]&&(o=t/2),e[s]===l[t]&&(c=t/10);let p=n[c];e=e.slice(0,-2);for(let n=0;n<d;n++){let u=e[n];for(let e=0;e<r;e++){let n=e-o;n<0&&(n+=r),u===l[e]&&i.push(t[n])}}let y=u(e,p);for(let e=0;e<d-2;e++){let t=y[e],l=i[e];for(let n=e+1;n<d;n++)if(y[n]<t){t=y[n],l=i[n];let r=y[e],o=i[e];y[e]=t,i[e]=l,y[n]=r,i[n]=o}a+=i[e]}return a}(o)),a.value=""}))}));